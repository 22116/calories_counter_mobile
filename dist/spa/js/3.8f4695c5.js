(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{"0191":function(t,e,o){"use strict";o("536a")},"536a":function(t,e,o){},"903c":function(t,e,o){},cae2:function(t,e,o){"use strict";o("903c")},f4df:function(t,e,o){"use strict";o.r(e);var n=function(){var t=this,e=this,o=e.$createElement,n=e._self._c||o;return e.loaded?n("q-page",{staticClass:"justify-evenly"},[n("history-calendar",{staticClass:"row q-gutter-md q-pa-lg",attrs:{id:"calendar",history:e.history,"white-list-hashes":e.whitelist},on:{navigation:e.fetchMonth}}),n("div",{staticClass:"row q-gutter-md q-pa-lg"},[n("q-badge",{attrs:{color:"red"}},[e._v("Some of the counters are not passed")]),n("q-badge",{attrs:{color:"green"}},[e._v("All counters reached")])],1),n("div",{staticClass:"row q-gutter-md q-pa-lg text-grey"},[e._v("\n    Help: Tap on the day to switch on the counter in the past. You can\n    switch to the date where you already have registered counter.\n  ")]),e.history.length?n("q-page-sticky",{attrs:{position:"top-right",offset:[5,5]}},[n("q-btn",{attrs:{fab:"",icon:"more_vert",color:"primary"},on:{click:function(){return e.showList=!e.showList}}})],1):e._e(),n("whitelist",{attrs:{counters:e.counters},on:{update:function(e){return t.whitelist=e}},model:{value:e.showList,callback:function(t){e.showList=t},expression:"showList"}})],1):e._e()},r=[],i=o("1b40"),s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"q-mt-sm"},[o("q-date",{staticClass:"full-width",attrs:{events:t.events,"event-color":t.eventColor,id:"calendar"},on:{navigation:t.navigation},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}}),o("switch-counter",{attrs:{counters:t.counters},on:{picked:t.switchCounter},model:{value:t.prompt,callback:function(e){t.prompt=e},expression:"prompt"}})],1)},a=[],c=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("q-dialog",{model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[o("q-card",{staticStyle:{"min-width":"350px"}},[o("q-card-section",[o("div",{staticClass:"text-h6"},[t._v("Pick counter to switch")])]),o("q-card-section",{staticClass:"q-pt-none"},[o("q-select",{attrs:{options:t.counterOptions,label:"Type"},scopedSlots:t._u([{key:"option",fn:function(e){return[o("q-item",t._g(t._b({class:e.opt.class},"q-item",e.itemProps,!1),e.itemEvents),[e.opt.icon?o("q-item-section",{attrs:{avatar:""}},[o("q-icon",{attrs:{name:e.opt.icon}})],1):t._e(),o("q-item-section",[o("q-item-label",{domProps:{innerHTML:t._s(e.opt.label)}}),o("q-item-label",{attrs:{caption:""},domProps:{textContent:t._s(e.opt.description)}})],1)],1)]}}]),model:{value:t.counterOption,callback:function(e){t.counterOption=e},expression:"counterOption"}})],1),o("q-card-actions",{staticClass:"text-primary",attrs:{align:"right"}},[o("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancel"}}),o("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Ok"},on:{click:t.switchCounter}})],1)],1)],1)},l=[],u=o("b369"),p=o("26a4"),d=function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};let h=class extends i["g"]{constructor(){super(...arguments),this.counterOption=null,this.counterOptions=[]}onCountersChanged(){this.counterOptions=[];for(const t of this.counters){const e=this.$container.resolve(p["a"]).isSucceed(t);this.counterOptions.push({value:t.id,label:t.name,description:t.description,icon:t.icon||"",class:{"bg-green-transparent":e,"bg-red-transparent":!e}})}}switchCounter(){var t;return null===(t=this.counterOption)||void 0===t?void 0:t.value}};d([Object(i["f"])({type:Boolean,required:!0})],h.prototype,"show",void 0),d([Object(i["c"])({type:Array,required:!0})],h.prototype,"counters",void 0),d([Object(i["h"])("counters",{deep:!0})],h.prototype,"onCountersChanged",null),d([Object(i["b"])("picked")],h.prototype,"switchCounter",null),h=d([Object(i["a"])({components:{StateCounter:u["a"]}})],h);var f=h,v=f,y=o("2877"),m=o("24e8"),b=o("f09f"),g=o("a370"),w=o("ddd8"),O=o("66e5"),q=o("4074"),C=o("0016"),j=o("0170"),x=o("4b7e"),_=o("9c40"),Q=o("7f67"),k=o("eebe"),D=o.n(k),S=Object(y["a"])(v,c,l,!1,null,null,null),P=S.exports;D()(S,"components",{QDialog:m["a"],QCard:b["a"],QCardSection:g["a"],QSelect:w["a"],QItem:O["a"],QItemSection:q["a"],QIcon:C["a"],QItemLabel:j["a"],QCardActions:x["a"],QBtn:_["a"]}),D()(S,"directives",{ClosePopup:Q["a"]});var R=o("bd4c"),$=function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s},A=function(t,e,o,n){function r(t){return t instanceof o?t:new o((function(e){e(t)}))}return new(o||(o=Promise))((function(o,i){function s(t){try{c(n.next(t))}catch(e){i(e)}}function a(t){try{c(n["throw"](t))}catch(e){i(e)}}function c(t){t.done?o(t.value):r(t.value).then(s,a)}c((n=n.apply(t,e||[])).next())}))},L=R["b"].formatDate;let I=class extends i["g"]{constructor(){super(...arguments),this.FORMAT="YYYY/MM/DD",this.prompt=!1,this.date=L(new Date,this.FORMAT),this.events=[],this.counters=[]}eventColor(t){const e=this.history.filter((e=>L(e.date,this.FORMAT)===t));for(const o of e)if(this.whiteListHashes.includes(o.getCounter().id)&&!this.$container.resolve(p["a"]).isSucceed(o.getCounter()))return"red";return"green"}navigation(t){return t.month-=1,t}historyChanged(){this.events=this.history.map((t=>L(t.date,this.FORMAT)))}dateChanged(t){if(!t)return;const e=new Date(t).toISOString(),o=(new Date).toISOString();e!==o&&this.history.find((t=>t.date.toISOString()===e))&&(this.counters=this.history.filter((e=>L(e.date,this.FORMAT)===t)).map((t=>t.getCounter())),this.prompt=!0)}switchCounter(t){return A(this,void 0,void 0,(function*(){yield this.$router.push(`/counter/${new Date(this.date).toISOString()}/${t}`)}))}};$([Object(i["c"])({type:Array,required:!0})],I.prototype,"history",void 0),$([Object(i["c"])({type:Array,default:[]})],I.prototype,"whiteListHashes",void 0),$([Object(i["b"])("navigation")],I.prototype,"navigation",null),$([Object(i["h"])("history",{immediate:!0,deep:!0})],I.prototype,"historyChanged",null),$([Object(i["h"])("date")],I.prototype,"dateChanged",null),I=$([Object(i["a"])({components:{SwitchCounter:P}})],I);var M=I,T=M,B=(o("cae2"),o("52ee")),H=Object(y["a"])(T,s,a,!1,null,null,null),N=H.exports;D()(H,"components",{QDate:B["a"]});var E=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("q-dialog",{model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[o("q-card",[o("q-card-section",[Object.keys(t.countersOptions).length?t._l(Object.keys(t.countersOptions),(function(e){return o("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],key:new Date(t.countersOptions[e].createdDate).getTime()+e,attrs:{tag:"label"}},[o("q-item-section",{attrs:{avatar:""}},[o("q-checkbox",{model:{value:t.countersOptions[e].value,callback:function(o){t.$set(t.countersOptions[e],"value",o)},expression:"countersOptions[hash].value"}})],1),o("q-item-section",[o("q-item-label",[o("q-icon",{attrs:{name:t.countersOptions[e].icon}}),t._v("\n              "+t._s(t.countersOptions[e].name)+" ("+t._s(t.countersOptions[e].createdDate)+")\n            ")],1),o("q-item-label",{attrs:{caption:""}},[t._v(t._s(t.countersOptions[e].description))])],1)],1)})):[o("q-item",[o("q-item-section",[t._v("\n            No counters data were added yet\n          ")])],1)]],2),o("q-card-actions",{staticClass:"text-primary",attrs:{align:"center"}},[o("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Close"}})],1)],1)],1)},F=[],Y=function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};let J=class extends i["g"]{constructor(){super(),this.countersOptions={};for(const t of this.counters)this.countersOptions[t.id]={value:!0,icon:t.icon||"",name:t.name,description:t.description,createdDate:t.createdAt.toDateString()}}whiteListHashes(){let t=[];for(const e in this.countersOptions)this.countersOptions[e].value&&t.push(e);return t}};Y([Object(i["f"])({type:Boolean,required:!0})],J.prototype,"show",void 0),Y([Object(i["c"])({type:Array,required:!0})],J.prototype,"counters",void 0),Y([Object(i["h"])("countersOptions",{deep:!0,immediate:!0}),Object(i["b"])("update")],J.prototype,"whiteListHashes",null),J=Y([i["a"]],J);var W=J,z=W,G=o("8f8e"),K=o("714f"),U=Object(y["a"])(z,E,F,!1,null,null,null),V=U.exports;D()(U,"components",{QDialog:m["a"],QCard:b["a"],QCardSection:g["a"],QItem:O["a"],QItemSection:q["a"],QCheckbox:G["a"],QItemLabel:j["a"],QIcon:C["a"],QCardActions:x["a"],QBtn:_["a"]}),D()(U,"directives",{Ripple:K["a"],ClosePopup:Q["a"]});var X=o("6cd4"),Z=o("8f67"),tt=function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s},et=function(t,e,o,n){function r(t){return t instanceof o?t:new o((function(e){e(t)}))}return new(o||(o=Promise))((function(o,i){function s(t){try{c(n.next(t))}catch(e){i(e)}}function a(t){try{c(n["throw"](t))}catch(e){i(e)}}function c(t){t.done?o(t.value):r(t.value).then(s,a)}c((n=n.apply(t,e||[])).next())}))};let ot=class extends i["g"]{constructor(){super(),this.history=[],this.counters=[],this.showList=!1,this.whitelist=[],this.loaded=!1,this.$q.loading.show()}mounted(){return et(this,void 0,void 0,(function*(){this.history=yield this.$orm.repository.history.setProxy(new X["a"](Object(Z["a"])(new Date))).findByMonth(new Date),this.counters=yield this.$orm.repository.counter.setProxy(new X["a"]).findAll(),this.loaded=!0,this.$q.loading.hide()}))}fetchMonth(t){return et(this,void 0,void 0,(function*(){this.history=yield this.$orm.repository.history.setProxy(new X["a"](JSON.stringify(t))).findByMonth(new Date(t.year,t.month))}))}};ot=tt([Object(i["a"])({components:{Whitelist:V,HistoryCalendar:N}})],ot);var nt=ot,rt=nt,it=(o("0191"),o("9989")),st=o("58a81"),at=o("de5e"),ct=Object(y["a"])(rt,n,r,!1,null,null,null);e["default"]=ct.exports;D()(ct,"components",{QPage:it["a"],QBadge:st["a"],QPageSticky:at["a"],QBtn:_["a"],QDate:B["a"]})}}]);