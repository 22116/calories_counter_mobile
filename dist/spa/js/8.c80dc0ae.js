(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[8],{f5bc:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.loaded?n("streak-table",{model:{value:e.history,callback:function(t){e.history=t},expression:"history"}}):e._e()],1)},a=[],o=n("1b40"),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.data.length?[n("q-table",{attrs:{grid:"",title:"Streaks",dense:"",data:e.data,columns:e.columns,"row-key":"name"}})]:[n("q-item",[n("q-item-section",[e._v("\n        No streak data available yet\n      ")])],1)]],2)},c=[],l=n("64ed"),s=n("0467"),u=n("26a4"),d=n("2ef0"),f=n("6cd4"),h=function(e,t,n,r){var a,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(o<3?a(i):o>3?a(t,n,i):a(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i},p=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{l(r.next(e))}catch(t){o(t)}}function c(e){try{l(r["throw"](e))}catch(t){o(t)}}function l(e){e.done?n(e.value):a(e.value).then(i,c)}l((r=r.apply(e,t||[])).next())}))};let y=class extends o["g"]{constructor(){super(),this.columns=[{name:"Counter",align:"left",label:"Counter",field:"counter",sortable:!0},{name:"Type",align:"center",label:"Type",field:"type",sortable:!0},{name:"Created Date",align:"center",label:"Created Date",field:"createdAt",sortable:!0},{name:"MaxStreak",align:"center",label:"Maximum Streak",field:"maxStreak",sortable:!0},{name:"CurStreak",align:"center",label:"Current Streak",field:"curStreak",sortable:!0}],this.data=[],this.$q.loading.show()}mounted(){return p(this,void 0,void 0,(function*(){const e={},t=Object(d["cloneDeep"])(this.history).sort(((e,t)=>e.date.getTime()>t.date.getTime()?1:-1));for(const n of t)e[n.counter_id]||(e[n.counter_id]={maxStreak:1,curStreak:1,prev:n,first:n}),this.$container.resolve(u["a"]).isDue(n.getCounter(),n.date)&&this.$container.resolve(u["a"]).isSucceed(n.getCounter())?e[n.counter_id].curStreak++:(e[n.counter_id].curStreak=1,e[n.counter_id].prev=n,e[n.counter_id].first=n),e[n.counter_id].curStreak>e[n.counter_id].maxStreak&&(e[n.counter_id].maxStreak=e[n.counter_id].curStreak),e[n.counter_id].prev=n,n.date.setTime(n.date.getTime()+864e5);for(const n in e){const t=yield this.$orm.repository.counter.setProxy(new f["a"](n)).find(n);t&&this.data.push({counter:t.name,type:Object(l["a"])(s["b"])[t.type],createdAt:t.createdAt.toDateString(),maxStreak:e[n].maxStreak-1,curStreak:e[n].curStreak-1})}this.$q.loading.hide()}))}};h([Object(o["f"])({type:Array,required:!0})],y.prototype,"history",void 0),y=h([o["a"]],y);var m=y,b=m,v=n("2877"),k=n("eaac"),g=n("66e5"),S=n("4074"),w=n("eebe"),x=n.n(w),_=Object(v["a"])(b,i,c,!1,null,null,null),j=_.exports;x()(_,"components",{QTable:k["a"],QItem:g["a"],QItemSection:S["a"]});var O=function(e,t,n,r){var a,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(o<3?a(i):o>3?a(t,n,i):a(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i},$=function(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function i(e){try{l(r.next(e))}catch(t){o(t)}}function c(e){try{l(r["throw"](e))}catch(t){o(t)}}function l(e){e.done?n(e.value):a(e.value).then(i,c)}l((r=r.apply(e,t||[])).next())}))};let q=class extends o["g"]{constructor(){super(),this.history=[],this.loaded=!1,this.$q.loading.show()}mounted(){return $(this,void 0,void 0,(function*(){this.history=yield this.$orm.repository.history.setProxy(new f["a"]).findAll(),this.loaded=!0,this.$q.loading.hide()}))}};q=O([Object(o["a"])({components:{StreakTable:j}})],q);var C=q,P=C,T=Object(v["a"])(P,r,a,!1,null,null,null);t["default"]=T.exports}}]);